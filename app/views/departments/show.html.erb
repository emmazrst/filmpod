<div class="department-showpage-container">
  <div class="department-showpage-inner-container">


    <div class = "sidebar col-2">
       <div class="sidebar-inner">

        <div class="sidebar-film-title">
          <div>
            <h1> <%=link_to @film.title, film_path(@film), class:"back-to-film-btn"%> </h1>
          </div>
        </div>
        <div class="departments-side-bar">
          <% @departments.each do |department| %>
            <div class="each-department-on-film-show">
                <%=link_to department.name, department_path(department)%>
            </div>
          <% end %>
          <div class="add-dpt-btn">
            <%= link_to "+ Add department", new_film_department_path(@film) %>
          </div>
          <div class="add-dpt-btn">
            <%= link_to "+ Add Grants", film_grants_path(@film) %>
          </div>
        </div>
        <div>
          <div class="sidebar-back-btn">
            <%= link_to 'Back', user_path %>
          </div>
          <div class="sidebar-edit-btn">
            <%= link_to 'Edit Film', edit_film_path(@film) %>
          </div>
          <div class="sidebar-danger-btn">
            <%= link_to "Delete Film", film_path(@film), method: :delete %>
          </div>
        </div>
      </div>
    </div>

      <div class="department-showpage-main-container col-10">
      <div class="department-show-tabs">
        <div class="tab-item tab-item-left">
          <%= link_to "Tasks", department_path(@department) %>
        </div>
        <div class="tab-item">
          <%= link_to "Moodboard", moodboard_department_path(@department) %>
        </div>
      </div class="beneath-tab">
        <div class="modal-container">
          <div class="modal-container-task-new-card" id="modal-container">
            <div class="close-modal">
              <p>X</p>
            </div>
            <h3> New Task </h3>
            <%= simple_form_for([@department, @new_task]) do |f| %>
              <%= f.input :title %>
              <%= f.input :content %>
              <%= f.input :status, :collection => %w[to-do in-progress done] %>
              <%= f.submit class: "new-film-btn" %>
            <% end %>
          </div>
        </div>
        <div class = "department-showpage-header">
          <div class = "department-showpage-header-title">
            <h1><%= @department.name.capitalize  %> Department </h1>
          </div>
          <div class="link-container">
            <div class="edit-link-button">
              <%= link_to 'Edit', edit_department_path(@department)%>
            </div>
            <div class="delete-link-button">
              <%= link_to 'Delete',department_path(action: :delete,id: @department.id),method: :delete, data: {confirm: "Are you sure?"} %>
            </div>
          </div>
        </div>
        <h3> Track your progress ‚è≥ </h3>
        <div class="department-showpage-timeline-container">
          <h4> Project timeline  </h4>
          <div class = "department-showpage-timeline">
            <div class="timeline-photo">
              <%= image_tag "timeline1.png", class:"timeline-png" %>
              <div class="timeline-tasks">
                <% @tasks.each do |task| %>
                  <%= link_to task_path(task) do %>
                    <div class="timeline-task-point">
                    </div>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <br>
        <h4> Tasks ‚úîÔ∏è </h4>
        <div data-controller="drag" data-drag-url="/tasks/:id/move" class="department-showpage-all-tasks-container">
          <div class="department-showpage-task-types to-do">
            <p> To-do üî¥ </p>
            <div class="department-showpage-tasks">
              <div class="single-task" id="to-do-new">
                <button class="new-task-btn">New Task</button>
              </div>
              <div data-drag-target="tasks" data-status="to-do">
                <% @tasks.order(position: :asc).each do |task| %>
                  <% if task.status == "to-do"  %>
                    <div data-id="<%= task.id %>" class="single-task">
                      <button class="task-title-select"><%= task.title %></button>
                      <%= render "tasks/show", task: task %>
                    </div>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
          <div class="department-showpage-task-types in-progress">
          <p> In-progress üü† </p>
            <div data-drag-target="tasks" data-status="in-progress" class="department-showpage-tasks" id="itemlist">
              <% @tasks.each do |task| %>
                <% if task.status == "in-progress"  %>
                  <div data-id="<%= task.id %>" class="single-task">
                    <button class="task-title-select"><%= task.title %></button>
                      <%= render "tasks/show", task: task %>
                  </div>
                <% end %>
              <% end %>
            </div>
          </div>
          <div class="department-showpage-task-types done">
          <p> Done üü¢ </p>
            <div data-drag-target="tasks" data-status="done" class="department-showpage-tasks">
              <% @tasks.each do |task| %>
                <% if task.status == "done"  %>
                  <div data-id="<%= task.id %>" class="single-task">
                    <button class="task-title-select"><%= task.title %></button>
                    <%= render "tasks/show", task: task %>
                  </div>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
        <br>
      </div>
  </div>
</div>
